<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    {#  块标题  #}
    <title>{% block mytitle %}
        our_music
    {% endblock %}</title>

    {#块样式，使用bootstrap.load_css()加载bootstrap的css资源#}
    {% block mystyle %}{{ bootstrap.load_css() }}{% endblock %}
    {% block scripts %}{{ bootstrap.load_js() }}{% endblock %}
    {# 自己的style#}
    <script src="{{ url_for('static',filename='js/my_js.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='./css/my_style.css') }}"/>
</head>
<body>
<div id="nav">
    <nav>
        <div class="logo">
            <img src="{{ url_for('static',filename='imgs/logo.png') }}" alt="Logo"/>
        </div>
        <h2 id="logo">OurMusic</h2>
        <ul class="nav_ul">
            <li><a href="http://localhost:5000">首页</a></li>
            <li><a href="#">我的音乐</a></li>
            <li><a href="#">我的关注</a></li>
            <li><a href="#">音乐人</a></li>
        </ul>
        <input id="search_my" type="texte">
        <button id="btn_my" type="button"><a href="">搜索</a></button>
    </nav>
    <div class="nav_div2">
        <ul class="navbar2_ul">
            <li><a href="#">推荐</a></li>
            <li><a href="#">排行榜</a></li>
            <li><a href="#">歌单</a></li>
        </ul>
    </div>
</div>
<div id="img_ad" style="background:url({{ url_for('static',filename='imgs/mao1.jpg') }}) ;">
    <div id="banner_list">
        <ul id="img_list">
            <li id="ban_li"><img src="{{ url_for('static',filename='imgs/top_1.jpg') }}" alt=""/></li>
            <li id="ban_li"><img src="{{ url_for('static',filename='imgs/top_2.jpg') }}" alt=""/></li>
            <li id="ban_li"><img src="{{ url_for('static',filename='imgs/top_3.jpg') }}" alt=""/></li>
            <li id="ban_li"><img src="{{ url_for('static',filename='imgs/top_4.jpg') }}" alt=""/></li>
            <li id="ban_li"><img src="{{ url_for('static',filename='imgs/top_1.jpg') }}" alt=""/></li>
        </ul>
        <!-- 原点占位 -->
        <ul id="icolist">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <div class="prev"><</div>
        <div class="next">></div>
    </div>
</div>
{% block concent %}
    <div class="fire" id="fire">
        <h2>热门推荐</h2>
        <ul class="fire_ul">
            <li><a href="#" class="red_show_fire">华语</a></li>
            <li><a href="#">流行</a></li>
            <li><a href="#">摇滚</a></li>
        </ul>
        <hr class="fire_hr"/>
        <div class="fire_list" id="show_fire" style="display: inline-block">
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename="./imgs/remen/remen_3.jpg") }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
        </div>
        <div class="fire_list">
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
        </div>
        <div class="fire_list">
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
            <div class="card" style="width: 14rem">
                <img src="{{ url_for('static',filename='./imgs/remen/remen_2.jpg') }}" class="card-img-top"
                     alt="..."/>
                <div class="card-body">
                    <p class="card-text">测试文件</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block songs_list %}
    <hr>
    <div id="bang_dan">
        <h2>榜单</h2>
        <hr
                width="80%"
                size="3"
                color="#ee7959"
                style="filter: alpha(opacity=100, finishopacity=0, style=1)"
        />
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <div id="bang_list">
                        <ul class="list-group">
                            <li class="list-group-item bang_ceshi">新歌榜</li>
                            {% for fire in  fire_songs[:10] %}
                                <li class="list-group-item"><a
                                        href="http://music.163.com/song/media/outer/url?id={{ fire[0][0] }}.mp3">{{ fire[0][1] }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                <div class="col-sm">
                    <div id="bang_list">
                        <ul class="list-group">
                            <li class="list-group-item bang_ceshi">新歌榜</li>
                            {% for biao in  biaos[:10] %}
                                <li class="list-group-item"><a
                                        href="http://music.163.com/song/media/outer/url?id={{ biao[0][0] }}.mp3">{{ biao[0][1] }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                <div class="col-sm">
                    <div id="bang_list">
                        <ul class="list-group">
                            <li class="list-group-item bang_ceshi">原创榜</li>
                            {% for yuan in  yuans[:10] %}
                                <li class="list-group-item"><a
                                        href="http://music.163.com/song/media/outer/url?id={{ yuan[0][0] }}.mp3">{{ yuan[0][1] }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block music %}
    <div id="music_out">
        <iframe
                frameborder="no"
                marginwidth="0"
                marginheight="0"
                width="1000"
                height="86"
                src="https://music.163.com/outchain/player?type=2&id=541853&auto=1&height=66"
        ></iframe>
    </div>
{% endblock %}
<footer>
    <div id="footer">
        <box id="footer_box1">
            <a href="#" class="footer_a">服务条款</a>
            <a href="#" class="footer_a">隐私政策</a>
            <a href="#" class="footer_a">儿童隐私政策</a>
            <a href="#" class="footer_a">版权投诉</a>
            <a href="#" class="footer_a">投资者关系</a>
            <a href="#" class="footer_a">广告合作</a>
            <a href="#" class="footer_a">联系我们</a>
        </box>
        <box id="footer_box2">
            <a href="#" class="footer_a">廉正举报</a>
            <div>
                不良信息举报邮箱:
                <a href="#" class="footer_a">2047672631@qq.com</a>
            </div>
            <div>
                客服热线：
                <a href="#" class="footer_a">95163298</a>
            </div>
        </box>
        <box class="itme">
          <p id="timeDate"></p>
          <p id="times"></p>
        </box>
        <a href="#" class="badge badge-primary">about our</a>
        <a href="https://github.com/natsume37/flask_basic" class="badge badge-secondary">gitHub</a>
        <a href="#" class="badge badge-success">Blog</a>
    </div>
    <button id="backToTopBtn" onclick="scrollToTop()">返回顶部</button>
</footer>
<script>
    {#添加固定导航栏特效#}
    let Head = document.querySelector("#nav");
    window.onscroll = () => {
        let top = document.documentElement.scrollTop || document.body.scrollTop;
        console.log(top);
        if (top != 0) {
            Head.style = "position:fixed;top:0;";
        } else {
            Head.style = "position:static";
        }
    };
    // 导航栏鼠标悬停
    const navItems = document.querySelectorAll(".navbar li");

    navItems.forEach((item) => {
        item.addEventListener("mouseenter", () => {
            item.style.color = "#ff6600"; // 悬停时的颜色
        });

        item.addEventListener("mouseleave", () => {
            item.style.color = "#fff"; // 恢复默认颜色
        });
    });

    let left = 0;
    let timer;
    let img_list = document.querySelector("#img_list");
    let n;
    let eprv = document.querySelector(".prev");
    let enext = document.querySelector(".next");
    let esico = document.querySelector("#icolist").getElementsByTagName("li");

    run();

    function run() {
        if (left <= -3200) {
            left = 0;
        }
        var m = Math.floor(-left / 800);
        img_list.style.marginLeft = left + "px";
        // 滚完一张图停留1.2s
        n = left % 800 == 0 ? (n = 1200) : (n = 10);
        left -= 10;
        timer = setTimeout(run, n);
        // 小圆点函数
        icochange(m);
    }

    // 图片定位函数
    function img_change(num) {
        let lt = -(num * 800);
        img_list.style.marginLeft = lt + "px";
        left = lt;
    }

    // 原点跟随变白色
    function icochange(m) {
        for (let index = 0; index < esico.length; index++) {
            esico[index].style.backgroundColor = "";
        }
        if (m < esico.length) {
            esico[m].style.backgroundColor = "#ecd452";
        }
    }

    eprv.addEventListener("click", function () {
        let prevgo = Math.floor(-left / 800) - 1;
        // 第一张没有上一张
        if (prevgo == -1) {
            prevgo = 3;
        }
        img_change(prevgo);
    });
    enext.addEventListener("click", function () {
        let nextgo = Math.floor(-left / 800) + 1;
        // 第一张没有上一张
        if (nextgo == 4) {
            nextgo = 0;
        }
        img_change(nextgo);
    });
    {#搜索效果#}
    let inp = document.querySelector("#search_my")
    let a = document.querySelector("#btn_my a")
    inp.addEventListener('change', function () {
        let song_name = inp.value
        a.href = 'http://127.0.0.1:5000/search/' + song_name
    })
    {#时间特效#}
    let now = new Date();
    function createtime() {
        let grt = new Date("11/1/2023 00:00:00"); //修改建站时间
        now.setTime(now.getTime() + 250);
        days = (now - grt) / 1000 / 60 / 60 / 24;
        dnum = Math.floor(days);
        hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
        hnum = Math.floor(hours);
        if (String(hnum).length == 1) {
          hnum = "0" + hnum;
        }
        minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
        mnum = Math.floor(minutes);
        if (String(mnum).length == 1) {
          mnum = "0" + mnum;
        }
        seconds =
          (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
        snum = Math.round(seconds);
        if (String(snum).length == 1) {
          snum = "0" + snum;
        }
    document.getElementById("timeDate").innerHTML =
      "本站安全运行 " + dnum + " 天";
    document.getElementById("times").innerHTML =
      hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
  }
      setInterval("createtime()", 250);
</script>
<script>
    // tab栏切换
    let li_shows = document.querySelectorAll(".fire_ul li a");
    let div_shows = document.querySelectorAll(".fire_list");
    console.log(div_shows.length);
    for (let index = 0; index < li_shows.length; index++) {
        li_shows[index].addEventListener("click", function () {
            for (let j of li_shows) {
                j.className = "";
            }
            li_shows[index].className = "red_show_fire";
            for (let div of div_shows) {
                div.style.display = "none";
            }
            div_shows[index].style.display = "inline-block";
        });
    }
</script>
</body>
</html>
